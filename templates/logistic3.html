{% extends 'base.html' %}
{% block title %}Linear regression{% endblock title %}

{% block body %}
<div class="container ">
    <br>
<div class="bg-light rounded-3 text-center fs-4 p-2">
    <h2 class="display-4">Logistic Regression</h2>
    Logistic regression is a statistical analysis method to predict a binary outcome, such as yes or no, based on prior observations of a data set.
    A logistic regression model predicts a dependent data variable by analyzing the relationship between one or more existing independent variables. For example, a logistic regression could be used to predict whether a political candidate will win or lose an election or whether a high school student will be admitted or not to a particular college. 
    These binary outcomes allow straightforward decisions between two alternatives.
    A logistic regression model can take into consideration multiple input criteria. 
    In the case of college acceptance, the logistic function could consider factors such as the student's grade point average, SAT score and number of extracurricular activities. Based on historical data about earlier outcomes involving the same input criteria, 
    it then scores new cases on their probability of falling into one of two outcome categories</div>

<br>
<div class="bg-light rounded-3 text-center fs-4 p-2">
    <h2 class="display-4">An Example Of Logistic regression Model</h2>
    An example of logistic regression model using a datbase to find out weather a patient will have a heart disease or not in 10 years using some factors
    like age, smoking rate, BMI, etc.
    </div>

<br>
<center>
<div class="row">
   
<img class="w-50 col-md-6" src="/static/heat.jpg"></img>
<div class="col-md-6 bg-light rounded-3 fs-4">Importing pandas to perform data cleaning in the datasets
    <br>Importing linear regression model from sklearn<br>
    Traintestsplit to split our data to training and testing respectively<br>
</div>
<center>
    
    <br>
    <center>
        <div class="row">
        <div class="col-md-6 bg-light rounded-3 fs-4 h-50" style="margin-top:90px;"> 
            Reading the database
        </div>
        <img class="w-50 col-md-6" src="\static\screenshot9.jpg"></img>
        <center>
            <br>
            <center>
                <div class="row">
                    <img class="w-50 col-md-6" src="\static\screenshot11.jpg"></img>
                <div class="col-md-6 bg-light rounded-3 fs-4 h-50" style="margin-top:200px;"> 
                    Heatmap to show correlation betweeen the data
                </div>
                
                <center>
                    <br>
                    <center>
                        <div class="row">
                        <div class="col-md-6 bg-light rounded-3 fs-4 h-50" style="margin-top:0px;"> 
                            The X variable contains all the independent values 
                            <br>
                            The Y variable contains the dependent variable which has to be predicted
                        </div>
                        <img class="w-50 col-md-6" src="\static\screenshot12.jpg"></img>
                        <center>
                            <br>
                            <br>
                    <center>
                        <div class="row">
                            <img class="w-50 col-md-6" src="\static\screenshot13.jpg"></img>
                        <div class="col-md-6 bg-light rounded-3 fs-4 h-50" style="margin-top:30px;"> 
                            Dividing the data into training and testing data  
                            <br>
                            Fitting data in Logistic Regression model to train our machine
                        </div>
                        
                        <center>
                            <br>
                            <br>
                            <center>
                                <div class="row">
                                    
                                <div class="col-md-6 bg-light rounded-3 fs-4 h-50" style="margin-top:10px;"> 
                                   Code to check Accuracy Score
                                </div>
                                <img class="w-50 col-md-6" src="/static/screenshot14.jpg"></img>
                                
                                <center>
                                    <br>
                                    <br>
                                    
                                        
                                        <center>
                                            <br>
                                            <input type="button" class="btn btn-primary" id="linearbtn" value="Click To See Accuracy score">
                            <br>
                            <div id="graphlinear">
                            
                                <div class="col-md-6 h-50 display-4 bg-light rounded-3" style="margin-top:20px"> Accuracy Score :- {{variable}}</div>
                            </div>
                            <br>

                             <div class="container bg-light text-start rounded-3 w-50">
          <form method="POST">
              <br>
              <div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                    Gender
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                  <li><a class="dropdown-item" id ="male" value="1">Male</a></li>
                  <li><a class="dropdown-item" id="f" value="0" >Female</a></li>
                </ul>
              </div>
              <br>
            <div class="mb-3">
                <label  class="form-label">Age</label>
                <input type="number" class="form-control css" id="age" >
              </div>
              
          <br>
          <div class="mb-3">
            <label for="exampleInputEmail1" class="form-label">Current Smoker</label>
          <div class="form-check">
            <input  class="form-check-input" type="radio" name="flexRadioDefault" id="cy">
            <label  class="form-check-label" for="flexRadioDefault1" >
              Yes
            </label>
          </div>
          <div class="form-check">
            <input  class="form-check-input" type="radio" name="flexRadioDefault" id="cn">
            <label class="form-check-label" for="flexRadioDefault1" >
              No
            </label>
          </div>
          </div>
          <div class="mb-3">
            <label  class="form-label">Cigarette Per Day</label>
            <input style="margin:auto;" type="number" class="form-control css" id="cigs">
          </div>
          <div class="mb-3">
            <label for="exampleInputEmail1" class="form-label">Blood Pressure Medications</label>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="flexRadioDefault1" id="bpy">
            <label  class="form-check-label" for="flexRadioDefault1">
              Yes
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="flexRadioDefault1" id="bpn">
            <label  class="form-check-label" for="flexRadioDefault1">
              No
            </label>
          </div>
          </div>
          <div class="mb-3">
            <label for="exampleInputEmail1" class="form-label">Prevalent Stroke</label>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="flexRadioDefault2" id="psy">
            <label  class="form-check-label" for="flexRadioDefault1">
              Yes
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="flexRadioDefault2" id="psn">
            <label class="form-check-label" for="flexRadioDefault1">
              No
            </label>
          </div>
          </div>
          <div class="mb-3">
            <label for="exampleInputEmail1" class="form-label">Prevalent Hypertension</label>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="flexRadioDefault3" id="phy">
            <label  class="form-check-label" for="flexRadioDefault1">
              Yes
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="flexRadioDefault3" id="phn">
            <label  class="form-check-label" for="flexRadioDefault1">
              No
            </label>
          </div>
          </div>
          <div class="mb-3">
            <label for="exampleInputEmail1" class="form-label">Diabetes</label>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="flexRadioDefault4" id="dy">
            <label  class="form-check-label" for="flexRadioDefault1">
              Yes
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="flexRadioDefault4" id="dn">
            <label  class="form-check-label" for="flexRadioDefault1">
              No
            </label>
          </div>
          </div>
          <div class="mb-3">
            <label for="exampleInputPassword1" class="form-label">Total Cholesterol</label>
            <input style="margin:auto;" type="number" class="form-control css" id="chol">
          </div>
          <div class="mb-3">
            <label for="exampleInputPassword1" class="form-label"> Systolic Blood Pressure</label>
            <input style="margin:auto;" type="number" class="form-control css" id="sbp">
          </div>
          <div class="mb-3">
            <label for="exampleInputPassword1" class="form-label">Diastolic Blood Pressure</label>
            <input style="margin:auto;" type="number" class="form-control css" id="dbp">
          </div>
          <div class="mb-3">
            <label for="exampleInputPassword1" class="form-label">BMI</label>
            <input style="margin:auto;" type="number" class="form-control css" id="bmi">
          </div>
          <div class="mb-3">
            <label for="exampleInputPassword1" class="form-label">Heart Rate</label>
            <input style="margin:auto;" type="number" class="form-control css" id="hr">
          </div>
          <div class="mb-3">
            <label for="exampleInputPassword1" class="form-label">Glucose</label>
            <input style="margin:auto;" type="number" class="form-control css" id="gluc">
          </div>
          
          <br>
          <input type="button" class="btn btn-primary" id="logbtn" value="Submit"></input>
      </form>
      <br>
     <p id="p">Heart Disease :</p>
     <br>   
     
    </div>

    <br>
                          
     
</div>
</div>
<script>
    $("#graphlinear").hide()
    $("#linearbtn").click(function(){
        $("#graphlinear").fadeToggle(500);
    })
var male
var age
var cs
var cspd
var bpmed
var prevs
var prevh
var diab
var tcol
var sysbp
var diabp
var bmi
var hr
var glu 
    $("#male").click(function(){
      male=1
    })
    $("#f").click(function(){
      male=0
    })
    $("#cy").click(function(){
      cs=1
    })
    $("#cn").click(function(){
      cs=0
    })
    $("#bpy").click(function(){
      bpmed=1
    })
    $("#bpn").click(function(){
      bpmed=0
    })
    $("#psy").click(function(){
      prevs=1
    })
    $("#psn").click(function(){
      prevs=0
    })
    $("#phy").click(function(){
      prevh=1
    })
    $("#phn").click(function(){
      prevh=0
    })
    $("#dy").click(function(){
      diab=1
    })
    $("#dn").click(function(){
      diab=0
    })
    $("#logbtn").click(function(){
      age=document.getElementById("age").value
      tcol=document.getElementById("chol").value
      sysbp=document.getElementById("sbp").value
      diabp=document.getElementById("dbp").value
      bmi=document.getElementById("bmi").value
      hr=document.getElementById("hr").value
      glu=document.getElementById("gluc").value
      cspd=document.getElementById("cigs").value
      console.log(age,
      tcol,
      sysbp,
      diabp,
      bmi,
      hr,
      glu,
      male,
      cs,
      cspd,
      bpmed,
      prevh,
      prevs,
      diab)
      $.ajax({
        type : "post",
        url : "/logistic3",
        data: {csrfmiddlewaretoken: '{{ csrf_token }}',
        age,
        tcol,
        sysbp,
        diabp,
        bmi,
        hr,
        glu,
        male,
        cs,
        cspd,
        bpmed,
        prevh,
        prevs,
        diab
                },
        success: function(resp)
        {
          p=resp
          if(p==0){
            $('#p').html("");
            $('#p').append("Heart Disease :No")
          }
          else{
            $('#p').html("");
            $('#p').append("Heart Disease :Yes")            
          }
      }
    })
    
    
    })


</script>

{% endblock body %}